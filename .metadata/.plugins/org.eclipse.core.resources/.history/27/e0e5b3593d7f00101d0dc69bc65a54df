package pagePackage;

import java.time.Duration;
import java.util.HashMap;
import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

import basePackage.BaseTest;
import io.appium.java_client.android.AndroidDriver;


public class PanNumberEnterPage extends BaseTest {
	
	public PanNumberEnterPage(AndroidDriver driver) {
		this.driver= driver;
	}
	
	String panNumber= "AAFCC4610A";
	String Panedittext_xpath= "//android.view.View[@content-desc=\"eg. ABCDE1234F\"]";
//	String Panedittext_xpath = "android.widget.EditText";
	String Checkbox_xpath= "android.widget.CheckBox";
	String Verifybutton_xpath="//android.widget.Button[@content-desc=\"Verify\"]";
	String Yesbutton_xpath="//android.widget.Button[@content-desc=\"YES\"]";
	
	  // Method to enter text via ADB shell command
/*    private void enterTextViaAdb(String text) {
        String command = "input text " + text;
        HashMap<String, Object> scriptArgs = new HashMap<>();
        scriptArgs.put("command", command);
        driver.executeScript("mobile: shell", scriptArgs);
    }
*/	
	
	private void enterTextViaAdbCharByChar(String text) throws InterruptedException {
        for (char c : text.toCharArray()) {
            String command = "input text " + String.valueOf(c);
            HashMap<String, Object> scriptArgs = new HashMap<>();
            scriptArgs.put("command", command);
            driver.executeScript("mobile: shell", scriptArgs);
            Thread.sleep(100); // 100ms pause after each character
        }
    }
	
	public void PanNumber() throws InterruptedException {
		    WebDriverWait wait2 = new WebDriverWait(driver, Duration.ofSeconds(20));
	        WebElement panEditText = wait2.until(ExpectedConditions.elementToBeClickable(By.xpath(Panedittext_xpath)));
	        //		wait2.until(ExpectedConditions.elementToBeClickable(By.xpath(Panedittext_xpath)));
	     	panEditText.click();
	    
	     	enterTextViaAdbCharByChar(panNumber);
//	     	enterPanNumberByChar(panEditText, panNumber);
	        System.out.println("Entered PAN number: " + panNumber);
	       	driver.hideKeyboard();
	       	
	       	Thread.sleep(5000);
	       	WebElement checkbox = wait2.until(ExpectedConditions.elementToBeClickable(By.className(Checkbox_xpath)));
	     	checkbox.click();
	       	
	        Thread.sleep(5000);
	        WebElement verifyButton = wait2.until(ExpectedConditions.elementToBeClickable(By.xpath(Verifybutton_xpath)));
	        verifyButton.click();
	     	 	
			  
			Thread.sleep(5000);
			WebElement yesButton = wait2.until(ExpectedConditions.elementToBeClickable(By.xpath(Yesbutton_xpath)));
			yesButton.click();

		
		
	}

}
